EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:stm32
LIBS:maxim
LIBS:lm75
LIBS:tpd4s012
LIBS:ap1509
LIBS:device_big
LIBS:SeeedOPL-Resistor-2016
LIBS:SeeedOPL-Connector-2016
LIBS:SeeedOPL-Inductor-2016
LIBS:SeeedOPL-Display-2016
LIBS:interface-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 5 7
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L 4N25 U6
U 1 1 59C7A067
P 6550 3150
F 0 "U6" H 6350 3350 50  0000 L CNN
F 1 "4N29" H 6550 3350 50  0000 L CNN
F 2 "DIP-6" H 6350 2950 50  0000 L CIN
F 3 "" H 6550 3150 50  0000 L CNN
	1    6550 3150
	1    0    0    -1  
$EndComp
$Comp
L 4N25 U5
U 1 1 59C7A083
P 6550 2250
F 0 "U5" H 6350 2450 50  0000 L CNN
F 1 "4N29" H 6550 2450 50  0000 L CNN
F 2 "DIP-6" H 6350 2050 50  0000 L CIN
F 3 "" H 6550 2250 50  0000 L CNN
	1    6550 2250
	-1   0    0    -1  
$EndComp
$Comp
L 6N136 U7
U 1 1 59C7A155
P 6550 4050
F 0 "U7" H 6350 4350 50  0000 L CNN
F 1 "6N137" H 6550 4350 50  0000 L CNN
F 2 "DIP-8" H 6350 3750 50  0000 L CIN
F 3 "" H 6550 4050 50  0000 L CNN
	1    6550 4050
	-1   0    0    -1  
$EndComp
$Comp
L CONN_01X05 P5
U 1 1 59C7A24F
P 9450 2350
F 0 "P5" H 9450 2650 50  0000 C CNN
F 1 "MDB" V 9550 2350 50  0000 C CNN
F 2 "" H 9450 2350 50  0001 C CNN
F 3 "" H 9450 2350 50  0000 C CNN
	1    9450 2350
	1    0    0    -1  
$EndComp
$Comp
L R R41
U 1 1 59C7A2D3
P 7700 2150
F 0 "R41" V 7780 2150 50  0000 C CNN
F 1 "100" V 7700 2150 50  0000 C CNN
F 2 "" V 7630 2150 50  0001 C CNN
F 3 "" H 7700 2150 50  0000 C CNN
	1    7700 2150
	0    1    1    0   
$EndComp
Text Label 8250 2150 0    59   ~ 0
VENDER_VBUS_34V0
Text Label 8250 2250 0    59   ~ 0
VENDER_GND
$Comp
L R R42
U 1 1 59C7A4C0
P 7700 3950
F 0 "R42" V 7780 3950 50  0000 C CNN
F 1 "1K" V 7700 3950 50  0000 C CNN
F 2 "" V 7630 3950 50  0001 C CNN
F 3 "" H 7700 3950 50  0000 C CNN
	1    7700 3950
	0    1    1    0   
$EndComp
Text Label 8250 2350 0    59   ~ 0
MASTER_RX
Text Label 8250 2450 0    59   ~ 0
MASTER_TX
Text Label 8250 2550 0    59   ~ 0
MDB_GND
$Comp
L TVS D6
U 1 1 59C7A808
P 7450 2500
F 0 "D6" H 7450 2600 50  0000 C CNN
F 1 "TVS" H 7450 2400 50  0000 C CNN
F 2 "" H 7450 2500 50  0001 C CNN
F 3 "" H 7450 2500 50  0000 C CNN
	1    7450 2500
	0    1    1    0   
$EndComp
$Comp
L R R37
U 1 1 59C7A967
P 4850 1800
F 0 "R37" V 4930 1800 50  0000 C CNN
F 1 "10K" V 4850 1800 50  0000 C CNN
F 2 "" V 4780 1800 50  0001 C CNN
F 3 "" H 4850 1800 50  0000 C CNN
	1    4850 1800
	1    0    0    -1  
$EndComp
$Comp
L +3.3V #PWR067
U 1 1 59C7A9C9
P 4850 1550
F 0 "#PWR067" H 4850 1400 50  0001 C CNN
F 1 "+3.3V" H 4850 1690 50  0000 C CNN
F 2 "" H 4850 1550 50  0000 C CNN
F 3 "" H 4850 1550 50  0000 C CNN
	1    4850 1550
	1    0    0    -1  
$EndComp
Text HLabel 2800 2250 0    59   Output ~ 0
MDB_POWER_DET_L
Text Notes 5200 1850 0    59   ~ 0
LOW when the vending \nmachine is powered.
$Comp
L GND #PWR068
U 1 1 59C7AA95
P 6050 4400
F 0 "#PWR068" H 6050 4150 50  0001 C CNN
F 1 "GND" H 6050 4250 50  0000 C CNN
F 2 "" H 6050 4400 50  0000 C CNN
F 3 "" H 6050 4400 50  0000 C CNN
	1    6050 4400
	1    0    0    -1  
$EndComp
$Comp
L 74HC14 U4
U 1 1 59C7AAD1
P 4500 3050
F 0 "U4" H 4650 3150 50  0000 C CNN
F 1 "74HC14" H 4700 2950 50  0000 C CNN
F 2 "" H 4500 3050 50  0001 C CNN
F 3 "" H 4500 3050 50  0000 C CNN
	1    4500 3050
	1    0    0    -1  
$EndComp
$Comp
L R R39
U 1 1 59C7AC1A
P 5700 3050
F 0 "R39" V 5780 3050 50  0000 C CNN
F 1 "1K" V 5700 3050 50  0000 C CNN
F 2 "" V 5630 3050 50  0001 C CNN
F 3 "" H 5700 3050 50  0000 C CNN
	1    5700 3050
	0    1    1    0   
$EndComp
$Comp
L 74HC14 U4
U 2 1 59C7AD1D
P 4500 4150
F 0 "U4" H 4650 4250 50  0000 C CNN
F 1 "74HC14" H 4700 4050 50  0000 C CNN
F 2 "" H 4500 4150 50  0001 C CNN
F 3 "" H 4500 4150 50  0000 C CNN
	2    4500 4150
	-1   0    0    -1  
$EndComp
$Comp
L 74HC14 U4
U 3 1 59C7ADFA
P 4500 4650
F 0 "U4" H 4650 4750 50  0000 C CNN
F 1 "74HC14" H 4700 4550 50  0000 C CNN
F 2 "" H 4500 4650 50  0001 C CNN
F 3 "" H 4500 4650 50  0000 C CNN
	3    4500 4650
	-1   0    0    -1  
$EndComp
Text HLabel 2800 3050 0    59   Input ~ 0
MDB_TXO
Text HLabel 2800 4650 0    59   Output ~ 0
MDB_RXI
$Comp
L R R38
U 1 1 59C7AFBD
P 5650 4000
F 0 "R38" V 5730 4000 50  0000 C CNN
F 1 "100" V 5650 4000 50  0000 C CNN
F 2 "" V 5580 4000 50  0001 C CNN
F 3 "" H 5650 4000 50  0000 C CNN
	1    5650 4000
	-1   0    0    1   
$EndComp
$Comp
L +3.3V #PWR069
U 1 1 59C7B0E1
P 5650 3550
F 0 "#PWR069" H 5650 3400 50  0001 C CNN
F 1 "+3.3V" H 5650 3690 50  0000 C CNN
F 2 "" H 5650 3550 50  0000 C CNN
F 3 "" H 5650 3550 50  0000 C CNN
	1    5650 3550
	1    0    0    -1  
$EndComp
$Comp
L C C17
U 1 1 59C7B12F
P 5350 3700
F 0 "C17" H 5375 3800 50  0000 L CNN
F 1 "0.1uF" H 5375 3600 50  0000 L CNN
F 2 "Capacitors_SMD:C_0402" H 5388 3550 50  0001 C CNN
F 3 "" H 5350 3700 50  0000 C CNN
	1    5350 3700
	0    1    1    0   
$EndComp
$Comp
L GND #PWR070
U 1 1 59C7B28A
P 5100 3750
F 0 "#PWR070" H 5100 3500 50  0001 C CNN
F 1 "GND" H 5100 3600 50  0000 C CNN
F 2 "" H 5100 3750 50  0000 C CNN
F 3 "" H 5100 3750 50  0000 C CNN
	1    5100 3750
	1    0    0    -1  
$EndComp
Wire Wire Line
	9250 2150 7850 2150
Wire Wire Line
	7350 2150 7550 2150
Wire Wire Line
	9250 2250 7950 2250
Wire Wire Line
	6250 2350 6050 2350
Wire Wire Line
	6050 2350 6050 4400
Wire Wire Line
	6250 4250 6050 4250
Connection ~ 6050 4250
Wire Wire Line
	6250 3250 6050 3250
Connection ~ 6050 3250
Wire Wire Line
	6850 3250 7000 3250
Wire Wire Line
	7000 3250 7000 4150
Wire Wire Line
	6850 4150 8250 4150
Wire Wire Line
	8250 4150 8250 2550
Wire Wire Line
	8250 2550 9250 2550
Connection ~ 7000 4150
Wire Wire Line
	9250 2450 8150 2450
Wire Wire Line
	8150 2450 8150 3950
Wire Wire Line
	8150 3950 7850 3950
Wire Wire Line
	7550 3950 6850 3950
Wire Wire Line
	9250 2350 8050 2350
Wire Wire Line
	8050 2350 8050 3150
Wire Wire Line
	8050 3150 6850 3150
Wire Wire Line
	7950 2250 7950 2850
Wire Wire Line
	7950 2850 7000 2850
Wire Wire Line
	7000 2850 7000 2350
Wire Wire Line
	7000 2350 6850 2350
Wire Wire Line
	7450 2800 7450 2850
Connection ~ 7450 2850
Wire Wire Line
	7450 2200 7450 2150
Connection ~ 7450 2150
Wire Wire Line
	2800 2250 6250 2250
Wire Wire Line
	4850 2250 4850 1950
Connection ~ 4850 2250
Wire Wire Line
	4850 1550 4850 1650
Wire Wire Line
	4950 3050 5550 3050
Wire Wire Line
	5850 3050 6250 3050
Wire Wire Line
	4950 4150 6250 4150
Wire Wire Line
	4050 4150 3950 4150
Wire Wire Line
	3950 4150 3950 4400
Wire Wire Line
	3950 4400 5050 4400
Wire Wire Line
	5050 4400 5050 4650
Wire Wire Line
	5050 4650 4950 4650
Wire Wire Line
	2800 4650 4050 4650
Wire Wire Line
	2800 3050 4050 3050
Wire Wire Line
	5650 3850 6250 3850
Wire Wire Line
	5650 3550 5650 3850
Connection ~ 5650 3850
Connection ~ 5650 4150
Wire Wire Line
	5500 3700 5650 3700
Connection ~ 5650 3700
Wire Wire Line
	5200 3700 5100 3700
Wire Wire Line
	5100 3700 5100 3750
Wire Notes Line
	10200 1450 6550 1450
Wire Notes Line
	6550 1450 6550 1900
Wire Notes Line
	6550 2550 6550 2850
Wire Notes Line
	6550 3450 6550 3650
Wire Notes Line
	6550 4450 6550 4650
Wire Notes Line
	6550 4650 10200 4650
Wire Notes Line
	10200 4650 10200 1450
Text Notes 8550 4550 0    59   ~ 0
Vending machine isolated region
Wire Wire Line
	4450 3150 4450 3350
Wire Wire Line
	4450 2600 4450 2950
$Comp
L +3.3V #PWR071
U 1 1 59C8723F
P 4450 2600
F 0 "#PWR071" H 4450 2450 50  0001 C CNN
F 1 "+3.3V" H 4450 2740 50  0000 C CNN
F 2 "" H 4450 2600 50  0000 C CNN
F 3 "" H 4450 2600 50  0000 C CNN
	1    4450 2600
	1    0    0    -1  
$EndComp
Wire Wire Line
	4450 2750 4700 2750
Connection ~ 4450 2750
$Comp
L C C16
U 1 1 59C872C3
P 4850 2750
F 0 "C16" H 4875 2850 50  0000 L CNN
F 1 "0.1uF" H 4875 2650 50  0000 L CNN
F 2 "Capacitors_SMD:C_0402" H 4888 2600 50  0001 C CNN
F 3 "" H 4850 2750 50  0000 C CNN
	1    4850 2750
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR072
U 1 1 59C87373
P 5100 2800
F 0 "#PWR072" H 5100 2550 50  0001 C CNN
F 1 "GND" H 5100 2650 50  0000 C CNN
F 2 "" H 5100 2800 50  0000 C CNN
F 3 "" H 5100 2800 50  0000 C CNN
	1    5100 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	5100 2800 5100 2750
Wire Wire Line
	5100 2750 5000 2750
$Comp
L GND #PWR073
U 1 1 59C8742F
P 4450 3350
F 0 "#PWR073" H 4450 3100 50  0001 C CNN
F 1 "GND" H 4450 3200 50  0000 C CNN
F 2 "" H 4450 3350 50  0000 C CNN
F 3 "" H 4450 3350 50  0000 C CNN
	1    4450 3350
	1    0    0    -1  
$EndComp
Text Label 4950 3150 0    59   ~ 0
TX_DRIVE
Text Label 4950 4400 0    59   ~ 0
RX
Wire Wire Line
	1250 6500 1750 6500
Text Label 1250 6500 0    59   ~ 0
TX_DRIVE
$Comp
L GND #PWR074
U 1 1 59C94C59
P 2050 6800
F 0 "#PWR074" H 2050 6550 50  0001 C CNN
F 1 "GND" H 2050 6650 50  0000 C CNN
F 2 "" H 2050 6800 50  0000 C CNN
F 3 "" H 2050 6800 50  0000 C CNN
	1    2050 6800
	1    0    0    -1  
$EndComp
Wire Wire Line
	2050 6650 2050 6800
Wire Wire Line
	2050 6250 2050 6200
$Comp
L LED D4
U 1 1 59C94C61
P 2050 6000
F 0 "D4" H 2050 6100 50  0000 C CNN
F 1 "MDB_TX" H 2050 5900 50  0000 C CNN
F 2 "LEDs:LED_0603" H 2050 6000 50  0001 C CNN
F 3 "" H 2050 6000 50  0000 C CNN
	1    2050 6000
	0    -1   -1   0   
$EndComp
$Comp
L R R35
U 1 1 59C94C68
P 2050 5650
F 0 "R35" V 2130 5650 50  0000 C CNN
F 1 "330" V 2050 5650 50  0000 C CNN
F 2 "" V 1980 5650 50  0001 C CNN
F 3 "" H 2050 5650 50  0000 C CNN
	1    2050 5650
	-1   0    0    1   
$EndComp
$Comp
L +3.3V #PWR075
U 1 1 59C94C6F
P 2050 5500
F 0 "#PWR075" H 2050 5350 50  0001 C CNN
F 1 "+3.3V" H 2050 5640 50  0000 C CNN
F 2 "" H 2050 5500 50  0000 C CNN
F 3 "" H 2050 5500 50  0000 C CNN
	1    2050 5500
	1    0    0    -1  
$EndComp
$Comp
L MMBF170 Q7
U 1 1 59C94C75
P 1950 6450
F 0 "Q7" H 2150 6525 50  0000 L CNN
F 1 "MMBF170" H 2150 6450 50  0000 L CNN
F 2 "TO_SOT_Packages_SMD:SOT-23" H 2150 6375 50  0000 L CIN
F 3 "" H 1950 6450 50  0000 L CNN
	1    1950 6450
	1    0    0    -1  
$EndComp
Wire Wire Line
	3500 6500 4000 6500
Text Label 3500 6500 0    59   ~ 0
RX
$Comp
L GND #PWR076
U 1 1 59C94D95
P 4300 6800
F 0 "#PWR076" H 4300 6550 50  0001 C CNN
F 1 "GND" H 4300 6650 50  0000 C CNN
F 2 "" H 4300 6800 50  0000 C CNN
F 3 "" H 4300 6800 50  0000 C CNN
	1    4300 6800
	1    0    0    -1  
$EndComp
Wire Wire Line
	4300 6650 4300 6800
Wire Wire Line
	4300 6250 4300 6200
$Comp
L LED D5
U 1 1 59C94D9D
P 4300 6000
F 0 "D5" H 4300 6100 50  0000 C CNN
F 1 "MDB_RX" H 4300 5900 50  0000 C CNN
F 2 "LEDs:LED_0603" H 4300 6000 50  0001 C CNN
F 3 "" H 4300 6000 50  0000 C CNN
	1    4300 6000
	0    -1   -1   0   
$EndComp
$Comp
L R R36
U 1 1 59C94DA4
P 4300 5650
F 0 "R36" V 4380 5650 50  0000 C CNN
F 1 "330" V 4300 5650 50  0000 C CNN
F 2 "" V 4230 5650 50  0001 C CNN
F 3 "" H 4300 5650 50  0000 C CNN
	1    4300 5650
	-1   0    0    1   
$EndComp
$Comp
L +3.3V #PWR077
U 1 1 59C94DAB
P 4300 5500
F 0 "#PWR077" H 4300 5350 50  0001 C CNN
F 1 "+3.3V" H 4300 5640 50  0000 C CNN
F 2 "" H 4300 5500 50  0000 C CNN
F 3 "" H 4300 5500 50  0000 C CNN
	1    4300 5500
	1    0    0    -1  
$EndComp
$Comp
L MMBF170 Q8
U 1 1 59C94DB1
P 4200 6450
F 0 "Q8" H 4400 6525 50  0000 L CNN
F 1 "MMBF170" H 4400 6450 50  0000 L CNN
F 2 "TO_SOT_Packages_SMD:SOT-23" H 4400 6375 50  0000 L CIN
F 3 "" H 4200 6450 50  0000 L CNN
	1    4200 6450
	1    0    0    -1  
$EndComp
Text Notes 2800 7200 0    79   ~ 16
MDB Activity LEDs
$Comp
L R R40
U 1 1 59C94FE0
P 7200 2150
F 0 "R40" V 7280 2150 50  0000 C CNN
F 1 "2.2K" V 7200 2150 50  0000 C CNN
F 2 "" V 7130 2150 50  0001 C CNN
F 3 "" H 7200 2150 50  0000 C CNN
	1    7200 2150
	0    1    1    0   
$EndComp
Wire Wire Line
	7050 2150 6850 2150
$Comp
L TEST_1P W14
U 1 1 59C965D5
P 3200 4550
F 0 "W14" H 3200 4820 50  0000 C CNN
F 1 "RX" H 3200 4750 50  0000 C CNN
F 2 "" H 3400 4550 50  0001 C CNN
F 3 "" H 3400 4550 50  0000 C CNN
	1    3200 4550
	1    0    0    -1  
$EndComp
Wire Wire Line
	3200 4550 3200 4650
Connection ~ 3200 4650
$Comp
L TEST_1P W13
U 1 1 59C96726
P 3200 2950
F 0 "W13" H 3200 3220 50  0000 C CNN
F 1 "TX" H 3200 3150 50  0000 C CNN
F 2 "" H 3400 2950 50  0001 C CNN
F 3 "" H 3400 2950 50  0000 C CNN
	1    3200 2950
	1    0    0    -1  
$EndComp
Wire Wire Line
	3200 2950 3200 3050
Connection ~ 3200 3050
Wire Wire Line
	3200 2250 3200 2150
Connection ~ 3200 2250
$Comp
L TEST_1P W12
U 1 1 59C968BA
P 3200 2150
F 0 "W12" H 3200 2420 50  0000 C CNN
F 1 "POW" H 3200 2350 50  0000 C CNN
F 2 "" H 3400 2150 50  0001 C CNN
F 3 "" H 3400 2150 50  0000 C CNN
	1    3200 2150
	1    0    0    -1  
$EndComp
$Comp
L TEST_1P W16
U 1 1 59C96CC8
P 5650 4300
F 0 "W16" H 5650 4570 50  0000 C CNN
F 1 "RX_IN" H 5650 4500 50  0000 C CNN
F 2 "" H 5850 4300 50  0001 C CNN
F 3 "" H 5850 4300 50  0000 C CNN
	1    5650 4300
	-1   0    0    1   
$EndComp
Wire Wire Line
	5650 4300 5650 4150
Wire Wire Line
	5400 3050 5400 2750
Connection ~ 5400 3050
$Comp
L TEST_1P W15
U 1 1 59C96F1C
P 5400 2750
F 0 "W15" H 5400 3020 50  0000 C CNN
F 1 "TX_LED" H 5400 2950 50  0000 C CNN
F 2 "" H 5600 2750 50  0001 C CNN
F 3 "" H 5600 2750 50  0000 C CNN
	1    5400 2750
	1    0    0    -1  
$EndComp
NoConn ~ 6850 3050
NoConn ~ 6250 2150
NoConn ~ 6250 3950
$Comp
L Jumper_NO_Small JP?
U 1 1 5A273710
P 5850 2450
F 0 "JP?" H 5850 2530 50  0000 C CNN
F 1 "Jumper_NO_Small" H 5860 2390 50  0001 C CNN
F 2 "" H 5850 2450 50  0000 C CNN
F 3 "" H 5850 2450 50  0000 C CNN
	1    5850 2450
	1    0    0    -1  
$EndComp
Wire Wire Line
	5750 2450 5650 2450
Wire Wire Line
	5650 2450 5650 2250
Connection ~ 5650 2250
Wire Wire Line
	5950 2450 6050 2450
Connection ~ 6050 2450
Text Notes 5200 2100 0    60   ~ 0
Closing JP disables \ndetector.
$EndSCHEMATC
